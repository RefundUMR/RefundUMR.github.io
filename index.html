<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>行遍千山路，打卡一图中</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body, html {
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            z-index: 100;
            position: relative;
            border-bottom: 1px solid #e0e0e0;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 0.95rem;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            position: relative;
        }
        
        .map-section {
            flex: 1;
            position: relative;
        }
        
        #map-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        .control-section {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 340px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            z-index: 10;
            max-height: calc(100vh - 150px);
            overflow-y: auto;
            backdrop-filter: blur(5px);
        }
        
        .section-title {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .input-group {
            margin-bottom: 18px;
        }
        
        label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            color: #34495e;
            font-weight: 600;
        }
        
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, input[type="number"]:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9 0%, #2573a7 100%);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #c0392b 0%, #a93226 100%);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }
        
        .footprints-list {
            margin-top: 25px;
            max-height: 280px;
            overflow-y: auto;
            border-radius: 10px;
            border: 2px solid #f1f1f1;
            padding: 5px;
        }
        
        .footprint-item {
            padding: 15px;
            border-bottom: 1px solid #f1f1f1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
            border-radius: 8px;
            margin-bottom: 5px;
        }
        
        .footprint-item:hover {
            background: #f9f9f9;
        }
        
        .footprint-item:last-child {
            border-bottom: none;
        }
        
        .footprint-info {
            flex: 1;
        }
        
        .footprint-name {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .footprint-coords {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 4px;
        }
        
        .footprint-actions {
            display: flex;
            gap: 8px;
        }
        
        .icon-btn {
            background: #f1f1f1;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: #7f8c8d;
            transition: all 0.3s;
            padding: 8px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
        }
        
        .icon-btn:hover {
            background: #3498db;
            color: white;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #f1f1f1;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #3498db;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        

        .glow-marker {
            position: relative;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #3498db;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7);
            animation: pulse 2s infinite;
            z-index: 10;
        }
        
        .glow-marker::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(52, 152, 219, 0.4);
            z-index: -1;
            animation: ripple 2s infinite;
        }
        
        .glow-marker i {
            color: white;
            font-size: 0.8rem;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7);
            }
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(52, 152, 219, 0);
            }
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(52, 152, 219, 0);
            }
        }
        
        @keyframes ripple {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }
        
        .footprint-marker {
            background: #e74c3c;
            animation: pulse-red 2s infinite;
        }
        
        .footprint-marker::after {
            background: rgba(231, 76, 60, 0.4);
        }
        
        @keyframes pulse-red {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7);
            }
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(231, 76, 60, 0);
            }
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(231, 76, 60, 0);
            }
        }
        

        .coordinate-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.5s;
        }
        
        .coordinate-hint.hidden {
            display: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        

        .amap-ui-control-zoom {
            position: absolute;
            right: 20px;
            bottom: 80px;
        }
        

        @media (max-width: 768px) {
            .control-section {
                width: calc(100% - 40px);
                max-height: 50vh;
                top: 10px;
                right: 10px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .coordinate-hint {
                width: calc(100% - 40px);
                font-size: 0.8rem;
                text-align: center;
            }
        }
        

        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            font-weight: 600;
            animation: slideIn 0.3s, fadeOut 0.3s 2.7s forwards;
            max-width: 300px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .message.success {
            background: #2ecc71;
            color: white;
        }
        
        .message.error {
            background: #e74c3c;
            color: white;
        }
        
        .message.info {
            background: #3498db;
            color: white;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>

                <svg t="1767862240405" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4781" width="28" height="28">
                    <path d="M512 188.19082a30.078891 30.078891 0 0 0-26.879009 17.279363L434.562855 313.626195 320.00708 330.905558a31.358844 31.358844 0 0 0-24.319103 21.119221 31.99882 31.99882 0 0 0 7.679716 31.99882L384.00472 467.860508l-19.199292 119.03561a31.99882 31.99882 0 0 0 11.519575 30.718867 29.438914 29.438914 0 0 0 31.358844 0L512 563.856968l102.396224 56.317923a29.438914 29.438914 0 0 0 31.358844 0 31.358844 31.358844 0 0 0 11.519575-30.078891L639.99528 468.500484 720.632307 384.023599a32.638796 32.638796 0 0 0 7.679716-31.998820 29.438914 29.438914 0 0 0-24.319103-20.479245l-114.555775-17.279363-51.198113-108.795988A29.438914 29.438914 0 0 0 512 188.19082z" fill="#31A6E7" p-id="4782"></path>
                    <path d="M599.036791 988.801298C837.747988 768.00944 959.983481 587.536095 959.983481 438.421593A442.223693 442.223693 0 0 0 512 0.037759a442.223693 442.223693 0 0 0-447.983481 438.383834c0 149.114501 120.95554 329.587846 359.666738 550.379705a127.99528 127.99528 0 0 0 175.353534 0z m-49.91816-51.838089a55.677947 55.677947 0 0 1-74.877239 0C248.329723 729.610856 136.973829 561.937039 136.973829 438.421593A370.546336 370.546336 0 0 1 512 72.355092a370.546336 370.546336 0 0 1 374.386195 366.066501c0 123.515445-111.355894 291.189262-336.627587 498.541616z m0 0" fill="#768287" p-id="4783"></path>
                </svg>
                行囊装满四时景，足迹点亮九州图
            </h1>
            <p class="subtitle">步步为营，丈量世界广度；点点成章，定格欢愉旅程。</p>
        </header>
        
        <div class="main-content">
            <section class="map-section">
                <div id="map-container"></div>
                

                <div class="coordinate-hint" id="coordinate-hint">
                    <svg t="1767862170768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2751" width="18" height="18">
                        <path d="M701.303467 753.066667a62.907733 62.907733 0 1 0-62.890667-62.890667 62.856533 62.856533 0 0 0 62.890667 62.890667z m134.485333 74.1376c-0.512 0.512-44.987733 46.08-134.485333 136.0384l-133.461334-135.509334a191.488 191.488 0 0 1-55.227733-135.509333c0-105.335467 84.8896-191.761067 189.201067-191.761067 103.799467 0 189.201067 85.9136 189.201066 191.761067a195.959467 195.959467 0 0 1-55.227733 134.997333zM355.6352 280.064a399.786667 399.786667 0 0 0 156.4672 31.6928 398.062933 398.062933 0 0 0 156.484267-31.6928c-34.781867-107.895467-93.0816-177.954133-156.484267-177.954133s-122.2144 70.570667-156.4672 177.954133z m351.300267-18.414933a413.166933 413.166933 0 0 0 75.093333-54.203734A397.653333 397.653333 0 0 0 629.76 119.995733c31.197867 34.781867 57.787733 83.3536 77.226667 141.653334z m-389.666134 0c19.438933-58.299733 46.08-106.871467 77.226667-141.653334a404.48 404.48 0 0 0-152.388267 87.4496 439.927467 439.927467 0 0 0 75.093334 54.203734z m6.144 497.032533a406.186667 406.186667 0 0 0-69.546666 47.0528 396.458667 396.458667 0 0 0 140.629333 76.6976c-28.125867-31.1808-52.155733-73.6256-71.082667-123.7504z m-42.4448-257.706667c0-71.0656 8.704-138.564267 24.046934-198.4a452.369067 452.369067 0 0 1-92.5696-65.450666 398.711467 398.711467 0 0 0-99.703467 263.850666z m1.024 42.4448H115.3024c9.284267 89.992533 49.083733 171.298133 108.3904 233.6768A455.68 455.68 0 0 1 310.613333 718.301867c-15.854933-52.6848-25.6-111.991467-28.637866-174.8992z m621.806934 33.757867c2.048-11.246933 4.096-22.510933 5.12-34.269867h-28.637867a236.7488 236.7488 0 0 0-45.5168-41.9328h76.202667a399.9744 399.9744 0 0 0-99.720534-264.362666A438.613333 438.613333 0 0 1 718.6944 302.08a777.386667 777.386667 0 0 1 23.517867 160.0512 220.16 220.16 0 0 0-41.4208-3.566933H699.733333c-2.542933-49.6128-9.198933-96.136533-19.933866-138.069334a436.906667 436.906667 0 0 1-168.2432 33.2288 436.906667 436.906667 0 0 1-168.226134-33.2288 795.562667 795.562667 0 0 0-20.48 180.497067h244.48a237.226667 237.226667 0 0 0-45.5168 41.9328H323.925333c3.072 56.763733 11.758933 109.943467 25.053867 157.013333A441.1904 441.1904 0 0 1 470.6816 670.72a133.8368 133.8368 0 0 0-0.512 14.318933 249.565867 249.565867 0 0 0 1.536 27.613867A412.672 412.672 0 0 0 361.813333 739.771733c35.293867 97.160533 90.453333 159.5392 150.340267 159.5392 20.48 0 40.96-7.662933 59.835733-21.469866l50.619734 49.595733a436.0704 436.0704 0 0 1-110.455467 13.806933c-243.9168 0-441.2928-197.376-441.2928-441.2928S268.1856 60.177067 512.1024 60.177067s441.309867 197.376 441.309867 441.2928a439.8592 439.8592 0 0 1-24.541867 145.237333 217.412267 217.412267 0 0 0-25.070933-69.546667z" fill="#FFFFFF" p-id="2752"></path>
                    </svg>
                    点击地图任意位置拾取坐标，然后点击"回眸昨日征程"按钮添加足迹
                </div>
            </section>
            
            <section class="control-section">
                <h2 class="section-title">
                    <svg t="1767862196673" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3785" width="24" height="24">
                        <path d="M511.9168 0c-225.92 0-409.6 183.68-409.6 409.6 0 212.48 268.16 614.4 409.6 614.4s409.6-401.92 409.6-614.4c0-225.92-183.68-409.6-409.6-409.6z m0 921.6c-71.04-10.24-307.2-332.16-307.2-512 0-169.6 137.6-307.2 307.2-307.2s307.2 137.6 307.2 307.2c0 179.84-236.16 501.76-307.2 512z m0-409.6a102.4 102.4 0 1 0 0-204.8 102.4 102.4 0 0 0 0 204.8z" fill="#FF4A4A" p-id="3786"></path>
                    </svg>
                    天地无尘，山河有影；<br>苍山负雪，明烛天南。
                </h2>
                
                <div class="input-group">
                    <label for="location-name">
                        <svg t="1767862196673" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3785" width="18" height="18">
                            <path d="M511.9168 0c-225.92 0-409.6 183.68-409.6 409.6 0 212.48 268.16 614.4 409.6 614.4s409.6-401.92 409.6-614.4c0-225.92-183.68-409.6-409.6-409.6z m0 921.6c-71.04-10.24-307.2-332.16-307.2-512 0-169.6 137.6-307.2 307.2-307.2s307.2 137.6 307.2 307.2c0 179.84-236.16 501.76-307.2 512z m0-409.6a102.4 102.4 0 1 0 0-204.8 102.4 102.4 0 0 0 0 204.8z" fill="#3498db" p-id="3786"></path>
                        </svg>
                        足迹——开拓未知，步履不停
                    </label>
                    <input type="text" id="location-name" placeholder="天安门">
                </div>
                
                <div class="input-group">
                    <label for="longitude">
                        <svg t="1767862170768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2751" width="18" height="18">
                            <path d="M701.303467 753.066667a62.907733 62.907733 0 1 0-62.890667-62.890667 62.856533 62.856533 0 0 0 62.890667 62.890667z m134.485333 74.1376c-0.512 0.512-44.987733 46.08-134.485333 136.0384l-133.461334-135.509334a191.488 191.488 0 0 1-55.227733-135.509333c0-105.335467 84.8896-191.761067 189.201067-191.761067 103.799467 0 189.201067 85.9136 189.201066 191.761067a195.959467 195.959467 0 0 1-55.227733 134.997333zM355.6352 280.064a399.786667 399.786667 0 0 0 156.4672 31.6928 398.062933 398.062933 0 0 0 156.484267-31.6928c-34.781867-107.895467-93.0816-177.954133-156.484267-177.954133s-122.2144 70.570667-156.4672 177.954133z m351.300267-18.414933a413.166933 413.166933 0 0 0 75.093333-54.203734A397.653333 397.653333 0 0 0 629.76 119.995733c31.197867 34.781867 57.787733 83.3536 77.226667 141.653334z m-389.666134 0c19.438933-58.299733 46.08-106.871467 77.226667-141.653334a404.48 404.48 0 0 0-152.388267 87.4496 439.927467 439.927467 0 0 0 75.093334 54.203734z m6.144 497.032533a406.186667 406.186667 0 0 0-69.546666 47.0528 396.458667 396.458667 0 0 0 140.629333 76.6976c-28.125867-31.1808-52.155733-73.6256-71.082667-123.7504z m-42.4448-257.706667c0-71.0656 8.704-138.564267 24.046934-198.4a452.369067 452.369067 0 0 1-92.5696-65.450666 398.711467 398.711467 0 0 0-99.703467 263.850666z m1.024 42.4448H115.3024c9.284267 89.992533 49.083733 171.298133 108.3904 233.6768A455.68 455.68 0 0 1 310.613333 718.301867c-15.854933-52.6848-25.6-111.991467-28.637866-174.8992z m621.806934 33.757867c2.048-11.246933 4.096-22.510933 5.12-34.269867h-28.637867a236.7488 236.7488 0 0 0-45.5168-41.9328h76.202667a399.9744 399.9744 0 0 0-99.720534-264.362666A438.613333 438.613333 0 0 1 718.6944 302.08a777.386667 777.386667 0 0 1 23.517867 160.0512 220.16 220.16 0 0 0-41.4208-3.566933H699.733333c-2.542933-49.6128-9.198933-96.136533-19.933866-138.069334a436.906667 436.906667 0 0 1-168.2432 33.2288 436.906667 436.906667 0 0 1-168.226134-33.2288 795.562667 795.562667 0 0 0-20.48 180.497067h244.48a237.226667 237.226667 0 0 0-45.5168 41.9328H323.925333c3.072 56.763733 11.758933 109.943467 25.053867 157.013333A441.1904 441.1904 0 0 1 470.6816 670.72a133.8368 133.8368 0 0 0-0.512 14.318933 249.565867 249.565867 0 0 0 1.536 27.613867A412.672 412.672 0 0 0 361.813333 739.771733c35.293867 97.160533 90.453333 159.5392 150.340267 159.5392 20.48 0 40.96-7.662933 59.835733-21.469866l50.619734 49.595733a436.0704 436.0704 0 0 1-110.455467 13.806933c-243.9168 0-441.2928-197.376-441.2928-441.2928S268.1856 60.177067 512.1024 60.177067s441.309867 197.376 441.309867 441.2928a439.8592 439.8592 0 0 1-24.541867 145.237333 217.412267 217.412267 0 0 0-25.070933-69.546667z" fill="#3498db" p-id="2752"></path>
                        </svg>
                        经度——东隅已逝，桑榆非晚
                    </label>
                    <input type="text" id="longitude" placeholder="116.397463" value="116.397463">
                </div>
                
                <div class="input-group">
                    <label for="latitude">
                        <svg t="1767862170768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2751" width="18" height="18">
                            <path d="M701.303467 753.066667a62.907733 62.907733 0 1 0-62.890667-62.890667 62.856533 62.856533 0 0 0 62.890667 62.890667z m134.485333 74.1376c-0.512 0.512-44.987733 46.08-134.485333 136.0384l-133.461334-135.509334a191.488 191.488 0 0 1-55.227733-135.509333c0-105.335467 84.8896-191.761067 189.201067-191.761067 103.799467 0 189.201067 85.9136 189.201066 191.761067a195.959467 195.959467 0 0 1-55.227733 134.997333zM355.6352 280.064a399.786667 399.786667 0 0 0 156.4672 31.6928 398.062933 398.062933 0 0 0 156.484267-31.6928c-34.781867-107.895467-93.0816-177.954133-156.484267-177.954133s-122.2144 70.570667-156.4672 177.954133z m351.300267-18.414933a413.166933 413.166933 0 0 0 75.093333-54.203734A397.653333 397.653333 0 0 0 629.76 119.995733c31.197867 34.781867 57.787733 83.3536 77.226667 141.653334z m-389.666134 0c19.438933-58.299733 46.08-106.871467 77.226667-141.653334a404.48 404.48 0 0 0-152.388267 87.4496 439.927467 439.927467 0 0 0 75.093334 54.203734z m6.144 497.032533a406.186667 406.186667 0 0 0-69.546666 47.0528 396.458667 396.458667 0 0 0 140.629333 76.6976c-28.125867-31.1808-52.155733-73.6256-71.082667-123.7504z m-42.4448-257.706667c0-71.0656 8.704-138.564267 24.046934-198.4a452.369067 452.369067 0 0 1-92.5696-65.450666 398.711467 398.711467 0 0 0-99.703467 263.850666z m1.024 42.4448H115.3024c9.284267 89.992533 49.083733 171.298133 108.3904 233.6768A455.68 455.68 0 0 1 310.613333 718.301867c-15.854933-52.6848-25.6-111.991467-28.637866-174.8992z m621.806934 33.757867c2.048-11.246933 4.096-22.510933 5.12-34.269867h-28.637867a236.7488 236.7488 0 0 0-45.5168-41.9328h76.202667a399.9744 399.9744 0 0 0-99.720534-264.362666A438.613333 438.613333 0 0 1 718.6944 302.08a777.386667 777.386667 0 0 1 23.517867 160.0512 220.16 220.16 0 0 0-41.4208-3.566933H699.733333c-2.542933-49.6128-9.198933-96.136533-19.933866-138.069334a436.906667 436.906667 0 0 1-168.2432 33.2288 436.906667 436.906667 0 0 1-168.226134-33.2288 795.562667 795.562667 0 0 0-20.48 180.497067h244.48a237.226667 237.226667 0 0 0-45.5168 41.9328H323.925333c3.072 56.763733 11.758933 109.943467 25.053867 157.013333A441.1904 441.1904 0 0 1 470.6816 670.72a133.8368 133.8368 0 0 0-0.512 14.318933 249.565867 249.565867 0 0 0 1.536 27.613867A412.672 412.672 0 0 0 361.813333 739.771733c35.293867 97.160533 90.453333 159.5392 150.340267 159.5392 20.48 0 40.96-7.662933 59.835733-21.469866l50.619734 49.595733a436.0704 436.0704 0 0 1-110.455467 13.806933c-243.9168 0-441.2928-197.376-441.2928-441.2928S268.1856 60.177067 512.1024 60.177067s441.309867 197.376 441.309867 441.2928a439.8592 439.8592 0 0 1-24.541867 145.237333 217.412267 217.412267 0 0 0-25.070933-69.546667z" fill="#3498db" p-id="2752"></path>
                        </svg>
                        纬度——生如逆旅，一苇以航
                    </label>
                    <input type="text" id="latitude" placeholder="39.909187" value="39.909187">
                </div>
                
                <button class="btn btn-primary" onclick="addFootprint()">
                    <svg t="1767862297236" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5795" width="20" height="20">
                        <path d="M0.00192 892.352329h1023.99744V1024H0.00192v-131.647671z m643.646391-511.99872H1023.99936V512.00128h-380.351049V380.353609z m-380.351049 394.943013L29.249847 380.353609C14.721883 351.105682 0.00192 307.201792 0.00192 263.297902A262.207344 262.207344 0 0 1 263.297262 0.00256C409.600896 0.00256 512.00064 117.058267 512.00064 263.297902c0 43.90389-14.655963 87.80778-29.247927 131.647671l-219.455451 380.351049z m0-643.646391a131.135672 131.135672 0 0 0-131.647671 131.647671c0 73.151817 58.495854 131.647671 131.647671 131.647671a131.135672 131.135672 0 0 0 131.647671-131.647671c0-73.151817-73.087817-131.647671-131.647671-131.647671z" fill="#FFFFFF" p-id="5796"></path>
                    </svg>
                    回眸昨日征程
                </button>
                
                <button class="btn btn-danger" onclick="clearAllFootprints()">
                    <svg t="1767865150456" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4786" width="20" height="20">
                        <path d="M512.039909 121.103172c-216.187761 0-391.44225 175.254489-391.44225 391.44532 0 216.186737 175.254489 391.443273 391.44225 391.443273 216.175481 0 391.42997-175.255513 391.42997-391.443273C903.469879 296.358685 728.21539 121.103172 512.039909 121.103172L512.039909 121.103172zM677.341722 677.535127c-0.00614 0.007163-0.01228 0.013303-0.019443 0.019443-10.881838 10.881838-28.52466 10.893094-39.420825 0.017396L512.091074 551.987736 386.505821 677.81142c-0.007163 0.00614-0.013303 0.014326-0.019443 0.01842-10.882861 10.882861-28.52466 10.894118-39.419801 0.019443-10.914584-10.895141-10.933003-28.55229-0.052189-39.45357l125.586277-125.823684-125.82573-125.588323c-10.900258-10.881838-10.918677-28.538987-0.037862-39.440267 0.007163-0.00614 0.013303-0.013303 0.019443-0.019443 10.867512-10.867512 28.511357-10.877745 39.406498-0.00307l125.823684 125.586277 125.573997-125.826753c0.007163-0.00614 0.013303-0.013303 0.01842-0.01842 10.882861-10.882861 28.525684-10.893094 39.435151-0.005117 10.902304 10.880815 10.916631 28.538987 0.037862 39.440267l-125.5873 125.82573 125.82573 125.586277C688.190815 648.991024 688.208211 666.650219 677.341722 677.535127L677.341722 677.535127z" fill="#FFFFFF" p-id="4787"></path>
                    </svg>
                    耕耘明日诗篇
                </button>
                
                <div class="footprints-list" id="footprints-list">

                </div>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="total-count">0</div>
                        <div class="stat-label">全体足迹数量</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="visible-count">0</div>
                        <div class="stat-label">显示足迹数量</div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=9823450d2472a519a6bdfad1c0bb7900"></script>
    <script>

        let map;
        let allFootprints = [];
        let infoWindow;
        
        // Initialize the map
        function initMap() {
            map = new AMap.Map('map-container', {
                zoom: 11,
                center: [116.397428, 39.90923], // the centre of Beijing
                resizeEnable: true,
                viewMode: '2D',
                mapStyle: 'amap://styles/light'
            });
            

            infoWindow = new AMap.InfoWindow({
                offset: new AMap.Pixel(0, -30),
                autoMove: true
            });
            

            map.on('click', function(e) {
                const lng = e.lnglat.getLng().toFixed(6);
                const lat = e.lnglat.getLat().toFixed(6);
                

                document.getElementById('longitude').value = lng;
                document.getElementById('latitude').value = lat;
                

                showCoordinateHint(lng, lat);
                

                setTimeout(() => {
                    document.getElementById('location-name').focus();
                }, 100);
            });
            

            map.addControl(new AMap.Zoom({
                position: 'RB'
            }));
            

            map.addControl(new AMap.Scale({
                position: 'LB'
            }));

            map.addControl(new AMap.ToolBar({
                position: 'RB'
            }));
            

            loadFootprints();
            

            updateStats();
            
            console.log("地图初始化完成");
        }
        

        function showCoordinateHint(lng, lat) {
            const hintElement = document.getElementById('coordinate-hint');
            

            hintElement.innerHTML = `
                <svg t="1767862170768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2751" width="18" height="18">
                    <path d="M701.303467 753.066667a62.907733 62.907733 0 1 0-62.890667-62.890667 62.856533 62.856533 0 0 0 62.890667 62.890667z m134.485333 74.1376c-0.512 0.512-44.987733 46.08-134.485333 136.0384l-133.461334-135.509334a191.488 191.488 0 0 1-55.227733-135.509333c0-105.335467 84.8896-191.761067 189.201067-191.761067 103.799467 0 189.201067 85.9136 189.201066 191.761067a195.959467 195.959467 0 0 1-55.227733 134.997333zM355.6352 280.064a399.786667 399.786667 0 0 0 156.4672 31.6928 398.062933 398.062933 0 0 0 156.484267-31.6928c-34.781867-107.895467-93.0816-177.954133-156.484267-177.954133s-122.2144 70.570667-156.4672 177.954133z m351.300267-18.414933a413.166933 413.166933 0 0 0 75.093333-54.203734A397.653333 397.653333 0 0 0 629.76 119.995733c31.197867 34.781867 57.787733 83.3536 77.226667 141.653334z m-389.666134 0c19.438933-58.299733 46.08-106.871467 77.226667-141.653334a404.48 404.48 0 0 0-152.388267 87.4496 439.927467 439.927467 0 0 0 75.093334 54.203734z m6.144 497.032533a406.186667 406.186667 0 0 0-69.546666 47.0528 396.458667 396.458667 0 0 0 140.629333 76.6976c-28.125867-31.1808-52.155733-73.6256-71.082667-123.7504z m-42.4448-257.706667c0-71.0656 8.704-138.564267 24.046934-198.4a452.369067 452.369067 0 0 1-92.5696-65.450666 398.711467 398.711467 0 0 0-99.703467 263.850666z m1.024 42.4448H115.3024c9.284267 89.992533 49.083733 171.298133 108.3904 233.6768A455.68 455.68 0 0 1 310.613333 718.301867c-15.854933-52.6848-25.6-111.991467-28.637866-174.8992z m621.806934 33.757867c2.048-11.246933 4.096-22.510933 5.12-34.269867h-28.637867a236.7488 236.7488 0 0 0-45.5168-41.9328h76.202667a399.9744 399.9744 0 0 0-99.720534-264.362666A438.613333 438.613333 0 0 1 718.6944 302.08a777.386667 777.386667 0 0 1 23.517867 160.0512 220.16 220.16 0 0 0-41.4208-3.566933H699.733333c-2.542933-49.6128-9.198933-96.136533-19.933866-138.069334a436.906667 436.906667 0 0 1-168.2432 33.2288 436.906667 436.906667 0 0 1-168.226134-33.2288 795.562667 795.562667 0 0 0-20.48 180.497067h244.48a237.226667 237.226667 0 0 0-45.5168 41.9328H323.925333c3.072 56.763733 11.758933 109.943467 25.053867 157.013333A441.1904 441.1904 0 0 1 470.6816 670.72a133.8368 133.8368 0 0 0-0.512 14.318933 249.565867 249.565867 0 0 0 1.536 27.613867A412.672 412.672 0 0 0 361.813333 739.771733c35.293867 97.160533 90.453333 159.5392 150.340267 159.5392 20.48 0 40.96-7.662933 59.835733-21.469866l50.619734 49.595733a436.0704 436.0704 0 0 1-110.455467 13.806933c-243.9168 0-441.2928-197.376-441.2928-441.2928S268.1856 60.177067 512.1024 60.177067s441.309867 197.376 441.309867 441.2928a439.8592 439.8592 0 0 1-24.541867 145.237333 217.412267 217.412267 0 0 0-25.070933-69.546667z" fill="#FFFFFF" p-id="2752"></path>
                </svg>
                已拾取坐标: (${lng}, ${lat})。点击"回眸昨日征程"按钮添加足迹
            `;

            hintElement.classList.remove('hidden');

            clearTimeout(window.coordinateHintTimeout);
            window.coordinateHintTimeout = setTimeout(() => {
                hintElement.classList.add('hidden');
            }, 3000);
        }
        

        function addFootprint() {
            const name = document.getElementById('location-name').value || "未命名兴趣点";
            const lng = parseFloat(document.getElementById('longitude').value);
            const lat = parseFloat(document.getElementById('latitude').value);
            
            if (isNaN(lng) || isNaN(lat)) {
                showMessage("请输入有效的经纬度！", "error");
                return;
            }
            
            const id = 'footprint_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            const footprint = {
                id: id,
                name: name,
                lnglat: [lng, lat],
                date: new Date().toLocaleString()
            };
            
            createMarker(footprint);
            allFootprints.push(footprint);
            

            saveFootprints();
            

            updateFootprintList();
            updateStats();

            map.setCenter([lng, lat]);

            showMessage(`成功添加足迹: ${name}`, "success");
            

            document.getElementById('coordinate-hint').classList.add('hidden');
        }
        

        function createMarker(footprint) {

            
            const markerContent = document.createElement('div');
            markerContent.className = 'glow-marker footprint-marker';
            

            
            markerContent.innerHTML = `
                <svg t="1767862240405" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4781" width="16" height="16">
                    <path d="M512 188.19082a30.078891 30.078891 0 0 0-26.879009 17.279363L434.562855 313.626195 320.00708 330.905558a31.358844 31.358844 0 0 0-24.319103 21.119221 31.99882 31.99882 0 0 0 7.679716 31.99882L384.00472 467.860508l-19.199292 119.03561a31.99882 31.99882 0 0 0 11.519575 30.718867 29.438914 29.438914 0 0 0 31.358844 0L512 563.856968l102.396224 56.317923a29.438914 29.438914 0 0 0 31.358844 0 31.358844 31.358844 0 0 0 11.519575-30.078891L639.99528 468.500484 720.632307 384.023599a32.638796 32.638796 0 0 0 7.679716-31.998820 29.438914 29.438914 0 0 0-24.319103-20.479245l-114.555775-17.279363-51.198113-108.795988A29.438914 29.438914 0 0 0 512 188.19082z" fill="#FFFFFF" p-id="4782"></path>
                    <path d="M599.036791 988.801298C837.747988 768.00944 959.983481 587.536095 959.983481 438.421593A442.223693 442.223693 0 0 0 512 0.037759a442.223693 442.223693 0 0 0-447.983481 438.383834c0 149.114501 120.95554 329.587846 359.666738 550.379705a127.99528 127.99528 0 0 0 175.353534 0z m-49.91816-51.838089a55.677947 55.677947 0 0 1-74.877239 0C248.329723 729.610856 136.973829 561.937039 136.973829 438.421593A370.546336 370.546336 0 0 1 512 72.355092a370.546336 370.546336 0 0 1 374.386195 366.066501c0 123.515445-111.355894 291.189262-336.627587 498.541616z m0 0" fill="#FFFFFF" p-id="4783"></path>
                </svg>
            `;
            
            markerContent.title = footprint.name;
            markerContent.dataset.id = footprint.id;
            

            
            const marker = new AMap.Marker({
                position: footprint.lnglat,
                content: markerContent,
                title: footprint.name,
                offset: new AMap.Pixel(-12, -12)
            });
            

            
            marker.on('click', function() {
                const content = `
                    <div style="padding: 15px; max-width: 250px;">
                        <h3 style="margin: 0 0 10px 0; color: #2c3e50;">${footprint.name}</h3>
                        <p style="margin: 5px 0; color: #7f8c8d; display: flex; align-items: center; gap: 8px;">
                            <svg t="1767862196673" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3785" width="14" height="14">
                                <path d="M511.9168 0c-225.92 0-409.6 183.68-409.6 409.6 0 212.48 268.16 614.4 409.6 614.4s409.6-401.92 409.6-614.4c0-225.92-183.68-409.6-409.6-409.6z m0 921.6c-71.04-10.24-307.2-332.16-307.2-512 0-169.6 137.6-307.2 307.2-307.2s307.2 137.6 307.2 307.2c0 179.84-236.16 501.76-307.2 512z m0-409.6a102.4 102.4 0 1 0 0-204.8 102.4 102.4 0 0 0 0 204.8z" fill="#7f8c8d" p-id="3786"></path>
                            </svg>
                            地点标识
                        </p>
                        <p style="margin: 5px 0; color: #7f8c8d; display: flex; align-items: center; gap: 8px;">
                            <svg t="1767862170768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2751" width="14" height="14">
                                <path d="M701.303467 753.066667a62.907733 62.907733 0 1 0-62.890667-62.890667 62.856533 62.856533 0 0 0 62.890667 62.890667z m134.485333 74.1376c-0.512 0.512-44.987733 46.08-134.485333 136.0384l-133.461334-135.509334a191.488 191.488 0 0 1-55.227733-135.509333c0-105.335467 84.8896-191.761067 189.201067-191.761067 103.799467 0 189.201067 85.9136 189.201066 191.761067a195.959467 195.959467 0 0 1-55.227733 134.997333zM355.6352 280.064a399.786667 399.786667 0 0 0 156.4672 31.6928 398.062933 398.062933 0 0 0 156.484267-31.6928c-34.781867-107.895467-93.0816-177.954133-156.484267-177.954133s-122.2144 70.570667-156.4672 177.954133z m351.300267-18.414933a413.166933 413.166933 0 0 0 75.093333-54.203734A397.653333 397.653333 0 0 0 629.76 119.995733c31.197867 34.781867 57.787733 83.3536 77.226667 141.653334z m-389.666134 0c19.438933-58.299733 46.08-106.871467 77.226667-141.653334a404.48 404.48 0 0 0-152.388267 87.4496 439.927467 439.927467 0 0 0 75.093334 54.203734z m6.144 497.032533a406.186667 406.186667 0 0 0-69.546666 47.0528 396.458667 396.458667 0 0 0 140.629333 76.6976c-28.125867-31.1808-52.155733-73.6256-71.082667-123.7504z m-42.4448-257.706667c0-71.0656 8.704-138.564267 24.046934-198.4a452.369067 452.369067 0 0 1-92.5696-65.450666 398.711467 398.711467 0 0 0-99.703467 263.850666z m1.024 42.4448H115.3024c9.284267 89.992533 49.083733 171.298133 108.3904 233.6768A455.68 455.68 0 0 1 310.613333 718.301867c-15.854933-52.6848-25.6-111.991467-28.637866-174.8992z m621.806934 33.757867c2.048-11.246933 4.096-22.510933 5.12-34.269867h-28.637867a236.7488 236.7488 0 0 0-45.5168-41.9328h76.202667a399.9744 399.9744 0 0 0-99.720534-264.362666A438.613333 438.613333 0 0 1 718.6944 302.08a777.386667 777.386667 0 0 1 23.517867 160.0512 220.16 220.16 0 0 0-41.4208-3.566933H699.733333c-2.542933-49.6128-9.198933-96.136533-19.933866-138.069334a436.906667 436.906667 0 0 1-168.2432 33.2288 436.906667 436.906667 0 0 1-168.226134-33.2288 795.562667 795.562667 0 0 0-20.48 180.497067h244.48a237.226667 237.226667 0 0 0-45.5168 41.9328H323.925333c3.072 56.763733 11.758933 109.943467 25.053867 157.013333A441.1904 441.1904 0 0 1 470.6816 670.72a133.8368 133.8368 0 0 0-0.512 14.318933 249.565867 249.565867 0 0 0 1.536 27.613867A412.672 412.672 0 0 0 361.813333 739.771733c35.293867 97.160533 90.453333 159.5392 150.340267 159.5392 20.48 0 40.96-7.662933 59.835733-21.469866l50.619734 49.595733a436.0704 436.0704 0 0 1-110.455467 13.806933c-243.9168 0-441.2928-197.376-441.2928-441.2928S268.1856 60.177067 512.1024 60.177067s441.309867 197.376 441.309867 441.2928a439.8592 439.8592 0 0 1-24.541867 145.237333 217.412267 217.412267 0 0 0-25.070933-69.546667z" fill="#7f8c8d" p-id="2752"></path>
                            </svg>
                            坐标: ${footprint.lnglat[0].toFixed(6)}, ${footprint.lnglat[1].toFixed(6)}
                        </p>
                        <p style="margin: 5px 0; color: #7f8c8d; display: flex; align-items: center; gap: 8px;">
                            <svg t="1767862297236" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5795" width="14" height="14">
                                <path d="M0.00192 892.352329h1023.99744V1024H0.00192v-131.647671z m643.646391-511.99872H1023.99936V512.00128h-380.351049V380.353609z m-380.351049 394.943013L29.249847 380.353609C14.721883 351.105682 0.00192 307.201792 0.00192 263.297902A262.207344 262.207344 0 0 1 263.297262 0.00256C409.600896 0.00256 512.00064 117.058267 512.00064 263.297902c0 43.90389-14.655963 87.80778-29.247927 131.647671l-219.455451 380.351049z m0-643.646391a131.135672 131.135672 0 0 0-131.647671 131.647671c0 73.151817 58.495854 131.647671 131.647671 131.647671a131.135672 131.135672 0 0 0 131.647671-131.647671c0-73.151817-73.087817-131.647671-131.647671-131.647671z" fill="#7f8c8d" p-id="5796"></path>
                            </svg>
                            添加时间: ${footprint.date}
                        </p>
                        <button onclick="removeFootprint('${footprint.id}')" style="background: #e74c3c; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px; width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <svg t="1767865150456" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4786" width="14" height="14">
                                <path d="M512.039909 121.103172c-216.187761 0-391.44225 175.254489-391.44225 391.44532 0 216.186737 175.254489 391.443273 391.44225 391.443273 216.175481 0 391.42997-175.255513 391.42997-391.443273C903.469879 296.358685 728.21539 121.103172 512.039909 121.103172L512.039909 121.103172zM677.341722 677.535127c-0.00614 0.007163-0.01228 0.013303-0.019443 0.019443-10.881838 10.881838-28.52466 10.893094-39.420825 0.017396L512.091074 551.987736 386.505821 677.81142c-0.007163 0.00614-0.013303 0.014326-0.019443 0.01842-10.882861 10.882861-28.52466 10.894118-39.419801 0.019443-10.914584-10.895141-10.933003-28.55229-0.052189-39.45357l125.586277-125.823684-125.82573-125.588323c-10.900258-10.881838-10.918677-28.538987-0.037862-39.440267 0.007163-0.00614 0.013303-0.013303 0.019443-0.019443 10.867512-10.867512 28.511357-10.877745 39.406498-0.00307l125.823684 125.586277 125.573997-125.826753c0.007163-0.00614 0.013303-0.013303 0.01842-0.01842 10.882861-10.882861 28.525684-10.893094 39.435151-0.005117 10.902304 10.880815 10.916631 28.538987 0.037862 39.440267l-125.5873 125.82573 125.82573 125.586277C688.190815 648.991024 688.208211 666.650219 677.341722 677.535127L677.341722 677.535127z" fill="#FFFFFF" p-id="4787"></path>
                            </svg>
                            删除此足迹
                        </button>
                    </div>
                `;
                
                infoWindow.setContent(content);
                infoWindow.open(map, footprint.lnglat);
            });
            

            
            map.add(marker);
            

            
            footprint.marker = marker;
        }
        

        
        function updateFootprintList() {
            const listContainer = document.getElementById('footprints-list');
            listContainer.innerHTML = '';
            
            if (allFootprints.length === 0) {
                listContainer.innerHTML = '<div class="footprint-item" style="justify-content: center; color: #7f8c8d;">暂无足迹，点击地图拾取坐标后添加足迹</div>';
                return;
            }
            

            
            const sortedFootprints = [...allFootprints].reverse();
            
            sortedFootprints.forEach(footprint => {
                const item = document.createElement('div');
                item.className = 'footprint-item';
                item.dataset.id = footprint.id;
                
                item.innerHTML = `
                    <div class="footprint-info">
                        <div class="footprint-name">${footprint.name}</div>
                        <div class="footprint-coords">${footprint.lnglat[0].toFixed(6)}, ${footprint.lnglat[1].toFixed(6)}</div>
                        <div class="footprint-coords">${footprint.date}</div>
                    </div>
                    <div class="footprint-actions">
                        <button class="icon-btn" onclick="focusOnFootprint('${footprint.id}')" title="定位">
                            <svg t="1767862297236" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5795" width="16" height="16">
                                <path d="M0.00192 892.352329h1023.99744V1024H0.00192v-131.647671z m643.646391-511.99872H1023.99936V512.00128h-380.351049V380.353609z m-380.351049 394.943013L29.249847 380.353609C14.721883 351.105682 0.00192 307.201792 0.00192 263.297902A262.207344 262.207344 0 0 1 263.297262 0.00256C409.600896 0.00256 512.00064 117.058267 512.00064 263.297902c0 43.90389-14.655963 87.80778-29.247927 131.647671l-219.455451 380.351049z m0-643.646391a131.135672 131.135672 0 0 0-131.647671 131.647671c0 73.151817 58.495854 131.647671 131.647671 131.647671a131.135672 131.135672 0 0 0 131.647671-131.647671c0-73.151817-73.087817-131.647671-131.647671-131.647671z" fill="#7f8c8d" p-id="5796"></path>
                            </svg>
                        </button>
                        <button class="icon-btn" onclick="removeFootprint('${footprint.id}')" title="删除">
                            <svg t="1767865150456" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4786" width="16" height="16">
                                <path d="M512.039909 121.103172c-216.187761 0-391.44225 175.254489-391.44225 391.44532 0 216.186737 175.254489 391.443273 391.44225 391.443273 216.175481 0 391.42997-175.255513 391.42997-391.443273C903.469879 296.358685 728.21539 121.103172 512.039909 121.103172L512.039909 121.103172zM677.341722 677.535127c-0.00614 0.007163-0.01228 0.013303-0.019443 0.019443-10.881838 10.881838-28.52466 10.893094-39.420825 0.017396L512.091074 551.987736 386.505821 677.81142c-0.007163 0.00614-0.013303 0.014326-0.019443 0.01842-10.882861 10.882861-28.52466 10.894118-39.419801 0.019443-10.914584-10.895141-10.933003-28.55229-0.052189-39.45357l125.586277-125.823684-125.82573-125.588323c-10.900258-10.881838-10.918677-28.538987-0.037862-39.440267 0.007163-0.00614 0.013303-0.013303 0.019443-0.019443 10.867512-10.867512 28.511357-10.877745 39.406498-0.00307l125.823684 125.586277 125.573997-125.826753c0.007163-0.00614 0.013303-0.013303 0.01842-0.01842 10.882861-10.882861 28.525684-10.893094 39.435151-0.005117 10.902304 10.880815 10.916631 28.538987 0.037862 39.440267l-125.5873 125.82573 125.82573 125.586277C688.190815 648.991024 688.208211 666.650219 677.341722 677.535127L677.341722 677.535127z" fill="#7f8c8d" p-id="4787"></path>
                            </svg>
                        </button>
                    </div>
                `;
                
                listContainer.appendChild(item);
            });
        }

        
        function focusOnFootprint(id) {
            const footprint = allFootprints.find(f => f.id === id);
            if (footprint) {
                map.setCenter(footprint.lnglat);
                map.setZoom(15);
                

                
                if (footprint.marker) {
                    footprint.marker.emit('click', {target: footprint.marker});
                }
            }
        }
        

        
        function removeFootprint(id) {
            const footprintIndex = allFootprints.findIndex(f => f.id === id);
            if (footprintIndex !== -1) {
                const footprint = allFootprints[footprintIndex];
                

                
                if (footprint.marker) {
                    map.remove(footprint.marker);
                }
                

                
                allFootprints.splice(footprintIndex, 1);
                

                
                saveFootprints();
                

                
                updateFootprintList();
                updateStats();
                
                infoWindow.close();
                
                showMessage(`已删除足迹: ${footprint.name}`, "success");
            }
        }
        

        
        function clearAllFootprints() {
            if (allFootprints.length === 0) {
                showMessage("当前没有足迹可清除！", "info");
                return;
            }
            
            if (confirm(`确定要清空所有 ${allFootprints.length} 个足迹点吗？此操作不可撤销！`)) {

                
                allFootprints.forEach(footprint => {
                    if (footprint.marker) {
                        map.remove(footprint.marker);
                    }
                });
                

                
                allFootprints = [];
                
                localStorage.removeItem('footprints');
                

                
                updateFootprintList();
                updateStats();
                

                
                infoWindow.close();
                
                showMessage("已清空所有足迹点", "success");
            }
        }
        

        
        function saveFootprints() {

            
            const footprintsToSave = allFootprints.map(f => ({
                id: f.id,
                name: f.name,
                lnglat: f.lnglat,
                date: f.date
            }));
            
            localStorage.setItem('footprints', JSON.stringify(footprintsToSave));
        }
        

        
        function loadFootprints() {
            const savedFootprints = localStorage.getItem('footprints');
            
            if (savedFootprints) {
                try {
                    const parsedFootprints = JSON.parse(savedFootprints);
                    
                    parsedFootprints.forEach(footprint => {
                        allFootprints.push(footprint);
                        createMarker(footprint);
                    });
                    
                    updateFootprintList();
                } catch (e) {
                    console.error("加载足迹数据失败:", e);
                    localStorage.removeItem('footprints');
                }
            }
        }
        

        
        function updateStats() {
            document.getElementById('total-count').textContent = allFootprints.length;
            document.getElementById('visible-count').textContent = allFootprints.length;
        }
        

        
        function showMessage(message, type = "info") {

            
            const existingMessages = document.querySelectorAll('.message');
            existingMessages.forEach(msg => msg.remove());
            

            
            const messageEl = document.createElement('div');
            messageEl.className = `message ${type}`;
            messageEl.innerHTML = message;
            
            document.body.appendChild(messageEl);
            

            
            setTimeout(() => {
                if (messageEl.parentNode) {
                    messageEl.parentNode.removeChild(messageEl);
                }
            }, 3000);
        }

        
        window.onload = initMap;
    </script>
</body>
</html>